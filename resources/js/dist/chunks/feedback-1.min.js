(self.webpackChunkplentymarkets_feedback=self.webpackChunkplentymarkets_feedback||[]).push([[1],{1223:function(e,t,a){var n=a(5112),r=a(30),i=a(3070),s=n("unscopables"),l=Array.prototype;null==l[s]&&i.f(l,s,{configurable:!0,value:r(null)}),e.exports=function(e){l[s][e]=!0}},1530:function(e,t,a){"use strict";var n=a(8710).charAt;e.exports=function(e,t,a){return t+(a?n(e,t).length:1)}},7007:function(e,t,a){"use strict";a(4916);var n=a(1320),r=a(7293),i=a(5112),s=a(8880),l=i("species"),c=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),o="$0"==="a".replace(/./,"$0"),u=i("replace"),d=!!/./[u]&&""===/./[u]("a","$0"),p=!r((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));e.exports=function(e,t,a,u){var f=i(e),b=!r((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),m=b&&!r((function(){var t=!1,a=/a/;return"split"===e&&((a={}).constructor={},a.constructor[l]=function(){return a},a.flags="",a[f]=/./[f]),a.exec=function(){return t=!0,null},a[f](""),!t}));if(!b||!m||"replace"===e&&(!c||!o||d)||"split"===e&&!p){var g=/./[f],h=a(f,""[e],(function(e,t,a,n,r){return t.exec===RegExp.prototype.exec?b&&!r?{done:!0,value:g.call(t,a,n)}:{done:!0,value:e.call(a,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:o,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),v=h[0],k=h[1];n(String.prototype,e,v),n(RegExp.prototype,f,2==t?function(e,t){return k.call(e,this,t)}:function(e){return k.call(e,this)})}u&&s(RegExp.prototype[f],"sham",!0)}},7850:function(e,t,a){var n=a(111),r=a(4326),i=a(5112)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==r(e))}},30:function(e,t,a){var n,r=a(9670),i=a(6048),s=a(748),l=a(3501),c=a(490),o=a(317),u=a(6200),d=u("IE_PROTO"),p=function(){},f=function(e){return"<script>"+e+"</"+"script>"},b=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;b=n?function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t}(n):((t=o("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F);for(var a=s.length;a--;)delete b.prototype[s[a]];return b()};l[d]=!0,e.exports=Object.create||function(e,t){var a;return null!==e?(p.prototype=r(e),a=new p,p.prototype=null,a[d]=e):a=b(),void 0===t?a:i(a,t)}},6048:function(e,t,a){var n=a(9781),r=a(3070),i=a(9670),s=a(1956);e.exports=n?Object.defineProperties:function(e,t){i(e);for(var a,n=s(t),l=n.length,c=0;l>c;)r.f(e,a=n[c++],t[a]);return e}},1956:function(e,t,a){var n=a(6324),r=a(748);e.exports=Object.keys||function(e){return n(e,r)}},7651:function(e,t,a){var n=a(4326),r=a(2261);e.exports=function(e,t){var a=e.exec;if("function"==typeof a){var i=a.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},2261:function(e,t,a){"use strict";var n,r,i=a(7066),s=a(2999),l=a(2309),c=RegExp.prototype.exec,o=l("native-string-replace",String.prototype.replace),u=c,d=(n=/a/,r=/b*/g,c.call(n,"a"),c.call(r,"a"),0!==n.lastIndex||0!==r.lastIndex),p=s.UNSUPPORTED_Y||s.BROKEN_CARET,f=void 0!==/()??/.exec("")[1];(d||f||p)&&(u=function(e){var t,a,n,r,s=this,l=p&&s.sticky,u=i.call(s),b=s.source,m=0,g=e;return l&&(-1===(u=u.replace("y","")).indexOf("g")&&(u+="g"),g=String(e).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==e[s.lastIndex-1])&&(b="(?: "+b+")",g=" "+g,m++),a=new RegExp("^(?:"+b+")",u)),f&&(a=new RegExp("^"+b+"$(?!\\s)",u)),d&&(t=s.lastIndex),n=c.call(l?a:s,g),l?n?(n.input=n.input.slice(m),n[0]=n[0].slice(m),n.index=s.lastIndex,s.lastIndex+=n[0].length):s.lastIndex=0:d&&n&&(s.lastIndex=s.global?n.index+n[0].length:t),f&&n&&n.length>1&&o.call(n[0],a,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)})),n}),e.exports=u},7066:function(e,t,a){"use strict";var n=a(9670);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},2999:function(e,t,a){"use strict";var n=a(7293);function r(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=n((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},8710:function(e,t,a){var n=a(9958),r=a(4488),i=function(e){return function(t,a){var i,s,l=String(r(t)),c=n(a),o=l.length;return c<0||c>=o?e?"":void 0:(i=l.charCodeAt(c))<55296||i>56319||c+1===o||(s=l.charCodeAt(c+1))<56320||s>57343?e?l.charAt(c):i:e?l.slice(c,c+2):s-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},9826:function(e,t,a){"use strict";var n=a(2109),r=a(2092).find,i=a(1223),s="find",l=!0;s in[]&&Array(1).find((function(){l=!1})),n({target:"Array",proto:!0,forced:l},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),i(s)},4916:function(e,t,a){"use strict";var n=a(2109),r=a(2261);n({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},3123:function(e,t,a){"use strict";var n=a(7007),r=a(7850),i=a(9670),s=a(4488),l=a(6707),c=a(1530),o=a(7466),u=a(7651),d=a(2261),p=a(2999).UNSUPPORTED_Y,f=[].push,b=Math.min,m=4294967295;n("split",2,(function(e,t,a){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var n=String(s(this)),i=void 0===a?m:a>>>0;if(0===i)return[];if(void 0===e)return[n];if(!r(e))return t.call(n,e,i);for(var l,c,o,u=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),b=0,g=new RegExp(e.source,p+"g");(l=d.call(g,n))&&!((c=g.lastIndex)>b&&(u.push(n.slice(b,l.index)),l.length>1&&l.index<n.length&&f.apply(u,l.slice(1)),o=l[0].length,b=c,u.length>=i));)g.lastIndex===l.index&&g.lastIndex++;return b===n.length?!o&&g.test("")||u.push(""):u.push(n.slice(b)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,a){var r=s(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,r,a):n.call(String(r),t,a)},function(e,r){var s=a(n,e,this,r,n!==t);if(s.done)return s.value;var d=i(e),f=String(this),g=l(d,RegExp),h=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(p?"g":"y"),k=new g(p?"^(?:"+d.source+")":d,v),y=void 0===r?m:r>>>0;if(0===y)return[];if(0===f.length)return null===u(k,f)?[f]:[];for(var x=0,_=0,R=[];_<f.length;){k.lastIndex=p?0:_;var C,D=u(k,p?f.slice(_):f);if(null===D||(C=b(o(k.lastIndex+(p?_:0)),f.length))===x)_=c(f,_,h);else{if(R.push(f.slice(x,_)),R.length===y)return R;for(var E=1;E<=D.length-1;E++)if(R.push(D[E]),R.length===y)return R;_=x=C}}return R.push(f.slice(x)),R}]}),p)},6927:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return s}});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"feedback-comment",class:e.classes,style:e.styles},[e.isReply?e._e():a("div",[a("p",{staticClass:"feedback-comment-title"},[e._v("\n      "+e._s(e.feedbackData.title)+"\n    ")]),e._v(" "),e.feedbackData.feedbackRating.rating.ratingValue>0?a("div",{staticClass:"feedback-rating"},e._l(5,(function(t){return a("i",{key:"feedback_rating_"+t,staticClass:"fa fa-star",class:{full:e.feedbackData.feedbackRating.rating.ratingValue>=t,empty:e.feedbackData.feedbackRating.rating.ratingValue<t}})})),0):e._e(),e._v(" "),a("div",{staticClass:"feedback-attributes-list"},[a("p",[e.isPurchased?a("span",{staticClass:"feedback-verified-tag"},[e._v("\n          "+e._s(e.$translate("Feedback::Feedback.verifiedPurchase"))+"\n        ")]):e._e(),e._v(" "),e._l(e.variationAttributes,(function(t,n){return a("span",{key:"feedback_attributes_"+n,staticClass:"feedback-attributes"},[e._v("\n          "+e._s(t.name)+": "+e._s(t.value)+"\n        ")])}))],2)])]),e._v(" "),a("p",{staticClass:"feedback-comment-text",domProps:{textContent:e._s(e.message)}}),e._v(" "),a("p",{staticClass:"feedback-info"},[a("span",{staticClass:"feedback-info-segment"},[a("strong",["user"===e.feedbackData.sourceRelation[0].feedbackRelationType?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"feedback-admin",attrs:{"data-toggle":"tooltip","data-placement":"top","data-original-title":e.$translate("Feedback::Feedback.shopManagerLabel")}},[a("i",{staticClass:"fa fa-check-square"}),e._v("\n          "+e._s(e.feedbackData.sourceRelation[0].sourceRelationLabel)+"\n        ")]):0==e.feedbackData.sourceRelation[0].feedbackRelationSourceId&&e.feedback.authorName.length>0?a("span",[e._v("\n          "+e._s(e.feedbackData.authorName)+"\n        ")]):0==e.feedbackData.sourceRelation[0].feedbackRelationSourceId?a("span",[e._v("\n          "+e._s(e.$translate("Feedback::Feedback.guestName"))+"\n        ")]):a("span",[e._v("\n          "+e._s(e.displayName)+"\n        ")])])]),e._v(" "),e.options.timestampVisibility?a("span",{staticClass:"feedback-info-segment"},[a("i",{staticClass:"fa fa-calendar text-muted"}),e._v("\n      "+e._s(e._f("date")(e.feedbackData.createdAt,e.$translate("Ceres::Template.devDateFormatMoment")||"DD.MM.YYYY"))+"\n    ")]):e._e(),e._v(" "),e.isReply||!e.authenticatedUser.isLoggedIn&&!e.options.allowGuestFeedbacks?e._e():a("span",{staticClass:"feedback-info-segment btn btn-sm btn-default",on:{click:function(t){e.replyFormVisible=!e.replyFormVisible}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.addComment"))+"\n    ")]),e._v(" "),e.feedbackData.replies&&e.feedbackData.replies.length>0&&!e.replyListVisible?a("span",{staticClass:"feedback-info-segment btn btn-sm btn-default",on:{click:function(t){e.replyListVisible=!e.replyListVisible}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.viewComments"))+" ("+e._s(e.feedbackData.replies.length)+")\n    ")]):e.feedbackData.replies&&e.feedbackData.replies.length>0&&e.replyListVisible?a("span",{staticClass:"feedback-info-segment btn btn-sm btn-default",on:{click:function(t){e.replyListVisible=!e.replyListVisible}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.hideComments"))+"\n    ")]):e._e()]),e._v(" "),e.replyFormVisible&&!e.isReply&&(e.authenticatedUser.isLoggedIn||e.options.allowGuestFeedbacks)?a("div",{staticClass:"feedback-add-reply"},[!e.authenticatedUser.isLoggedIn&&e.options.allowGuestFeedbacks?a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.authorName,expression:"authorName"}],staticClass:"form-control",attrs:{id:"author",type:"text",name:"author",placeholder:e.$translate("Feedback::Feedback.authorName"),disabled:e.authenticatedUser.limitReached||!e.authenticatedUser.hasPurchased},domProps:{value:e.authorName},on:{input:function(t){t.target.composing||(e.authorName=t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.honeypot,expression:"honeypot"}],staticClass:"form-control",attrs:{id:"comment-textfield",type:"text",name:"comment-textfield"},domProps:{value:e.honeypot},on:{input:function(t){t.target.composing||(e.honeypot=t.target.value)}}})]):e._e(),e._v(" "),a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.replyMessage,expression:"replyMessage"}],staticClass:"form-control",attrs:{name:"message",rows:"3",placeholder:e.$translate("Feedback::Feedback.commentMessage")},domProps:{value:e.replyMessage},on:{input:function(t){t.target.composing||(e.replyMessage=t.target.value)}}})]),e._v(" "),a("button",{staticClass:"btn btn-primary btn-appearance",attrs:{disabled:!e.replyMessage},on:{click:function(t){return e.createReply()}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.submitComment"))+"\n    ")])]):e._e(),e._v(" "),e.feedbackData.replies&&e.feedbackData.replies.length>0&&e.replyListVisible?a("div",{staticClass:"feedback-replies"},e._l(e.feedbackData.replies,(function(t){return a("feedback-list-entry",{key:t.id,attrs:{feedback:t,"is-reply":!0,"show-controls":e.showControls,classes:e.classes,styles:e.styles,options:e.options},on:{delete:function(t){return e.$emit("delete",t)}}})})),1):e._e()])};n._withStripped=!0;a(7327),a(9826),a(1249),a(3123);var r={name:"FeedbackComment",components:{"feedback-list-entry":a(8384).Z},props:{feedback:Object,isReply:Boolean,showControls:Boolean,classes:String,styles:String,options:Object},data:()=>({authorName:"",replyMessage:"",replyFormVisible:!1,replyListVisible:!1,honeypot:"",feedbackData:{}}),computed:{variationAttributes(){if("variation"!==this.feedbackData.targetRelation.feedbackRelationType||this.feedbackData.targetRelation.targetRelationName.length<=0||!this.feedbackData.targetRelation.variationAttributes||!this.itemAttributes)return[];var e=this;return this.feedbackData.targetRelation.variationAttributes.map((function(t){var a=e.feedbackData.targetRelation.feedbackRelationTargetId;if(!Object.prototype.hasOwnProperty.call(e.itemAttributes,a)||!Object.prototype.hasOwnProperty.call(e.itemAttributes[a],t.attributeId)||!Object.prototype.hasOwnProperty.call(e.itemAttributes[a][t.attributeId],t.valueId))return null;var n=e.itemAttributes[a][t.attributeId][t.valueId];return{name:n.attributeName,value:n.attributeValue}})).filter((function(e){return null!==e}))},displayName(){var e=this.feedbackData.sourceRelation[0].sourceRelationLabel;return" "!==e?e.split(" ").map((function(e,t){return 0===t?e+" ":e.substr(0,1)+"."})).join(""):this.$translate("Feedback::Feedback.guestName")},message(){return this.feedbackData.feedbackComment?this.feedbackData.feedbackComment.comment.message:""},isPurchased(){return this.feedbackData.sourceRelation.find((function(e){return"orderItem"===e.feedbackRelationType}))},authenticatedUser(){return this.$store.state.feedback.authenticatedUser},itemAttributes(){return this.$store.state.feedback.itemAttributes}},created(){this.feedbackData=this.feedback},methods:{createReply(){if(this.replyMessage&&!(this.honeypot.length>0)){var e=this;$.ajax({type:"POST",url:"/rest/feedbacks/feedback/create",data:{authorName:this.authorName,message:this.replyMessage,targetId:this.feedbackData.id,type:"reply"},contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",xhrFields:{withCredentials:!0},success:function(t){e.feedbackData.replies||(e.feedbackData.replies=[]),e.feedbackData.replies.unshift(t),e.replyMessage="",e.replyFormVisible=!1,e.replyListVisible=!0}})}}}},i=(0,a(1900).Z)(r,n,[],!1,null,null,null);i.options.__file="resources/js/src/app/components/item/singleitem/FeedbackComment.vue";var s=i.exports}}]);
//# sourceMappingURL=feedback-1.min.js.map