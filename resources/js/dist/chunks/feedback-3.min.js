(self.webpackChunkplentymarkets_feedback=self.webpackChunkplentymarkets_feedback||[]).push([[3],{1223:function(e,t,a){var n=a(5112),i=a(30),s=a(3070),r=n("unscopables"),l=Array.prototype;null==l[r]&&s.f(l,r,{configurable:!0,value:i(null)}),e.exports=function(e){l[r][e]=!0}},1530:function(e,t,a){"use strict";var n=a(8710).charAt;e.exports=function(e,t,a){return t+(a?n(e,t).length:1)}},7007:function(e,t,a){"use strict";a(4916);var n=a(1320),i=a(7293),s=a(5112),r=a(8880),l=s("species"),c=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),o="$0"==="a".replace(/./,"$0"),u=s("replace"),d=!!/./[u]&&""===/./[u]("a","$0"),p=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));e.exports=function(e,t,a,u){var f=s(e),b=!i((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),m=b&&!i((function(){var t=!1,a=/a/;return"split"===e&&((a={}).constructor={},a.constructor[l]=function(){return a},a.flags="",a[f]=/./[f]),a.exec=function(){return t=!0,null},a[f](""),!t}));if(!b||!m||"replace"===e&&(!c||!o||d)||"split"===e&&!p){var g=/./[f],h=a(f,""[e],(function(e,t,a,n,i){return t.exec===RegExp.prototype.exec?b&&!i?{done:!0,value:g.call(t,a,n)}:{done:!0,value:e.call(a,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:o,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),v=h[0],k=h[1];n(String.prototype,e,v),n(RegExp.prototype,f,2==t?function(e,t){return k.call(e,this,t)}:function(e){return k.call(e,this)})}u&&r(RegExp.prototype[f],"sham",!0)}},7850:function(e,t,a){var n=a(111),i=a(4326),s=a(5112)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==i(e))}},7651:function(e,t,a){var n=a(4326),i=a(2261);e.exports=function(e,t){var a=e.exec;if("function"==typeof a){var s=a.call(e,t);if("object"!=typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},2261:function(e,t,a){"use strict";var n,i,s=a(7066),r=a(2999),l=a(2309),c=RegExp.prototype.exec,o=l("native-string-replace",String.prototype.replace),u=c,d=(n=/a/,i=/b*/g,c.call(n,"a"),c.call(i,"a"),0!==n.lastIndex||0!==i.lastIndex),p=r.UNSUPPORTED_Y||r.BROKEN_CARET,f=void 0!==/()??/.exec("")[1];(d||f||p)&&(u=function(e){var t,a,n,i,r=this,l=p&&r.sticky,u=s.call(r),b=r.source,m=0,g=e;return l&&(-1===(u=u.replace("y","")).indexOf("g")&&(u+="g"),g=String(e).slice(r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&"\n"!==e[r.lastIndex-1])&&(b="(?: "+b+")",g=" "+g,m++),a=new RegExp("^(?:"+b+")",u)),f&&(a=new RegExp("^"+b+"$(?!\\s)",u)),d&&(t=r.lastIndex),n=c.call(l?a:r,g),l?n?(n.input=n.input.slice(m),n[0]=n[0].slice(m),n.index=r.lastIndex,r.lastIndex+=n[0].length):r.lastIndex=0:d&&n&&(r.lastIndex=r.global?n.index+n[0].length:t),f&&n&&n.length>1&&o.call(n[0],a,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)})),n}),e.exports=u},2999:function(e,t,a){"use strict";var n=a(7293);function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=n((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},8710:function(e,t,a){var n=a(9958),i=a(4488),s=function(e){return function(t,a){var s,r,l=String(i(t)),c=n(a),o=l.length;return c<0||c>=o?e?"":void 0:(s=l.charCodeAt(c))<55296||s>56319||c+1===o||(r=l.charCodeAt(c+1))<56320||r>57343?e?l.charAt(c):s:e?l.slice(c,c+2):r-56320+(s-55296<<10)+65536}};e.exports={codeAt:s(!1),charAt:s(!0)}},9826:function(e,t,a){"use strict";var n=a(2109),i=a(2092).find,s=a(1223),r="find",l=!0;r in[]&&Array(1).find((function(){l=!1})),n({target:"Array",proto:!0,forced:l},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s(r)},9600:function(e,t,a){"use strict";var n=a(2109),i=a(8361),s=a(5656),r=a(9341),l=[].join,c=i!=Object,o=r("join",",");n({target:"Array",proto:!0,forced:c||!o},{join:function(e){return l.call(s(this),void 0===e?",":e)}})},4916:function(e,t,a){"use strict";var n=a(2109),i=a(2261);n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},3123:function(e,t,a){"use strict";var n=a(7007),i=a(7850),s=a(9670),r=a(4488),l=a(6707),c=a(1530),o=a(7466),u=a(7651),d=a(2261),p=a(2999).UNSUPPORTED_Y,f=[].push,b=Math.min,m=4294967295;n("split",2,(function(e,t,a){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var n=String(r(this)),s=void 0===a?m:a>>>0;if(0===s)return[];if(void 0===e)return[n];if(!i(e))return t.call(n,e,s);for(var l,c,o,u=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),b=0,g=new RegExp(e.source,p+"g");(l=d.call(g,n))&&!((c=g.lastIndex)>b&&(u.push(n.slice(b,l.index)),l.length>1&&l.index<n.length&&f.apply(u,l.slice(1)),o=l[0].length,b=c,u.length>=s));)g.lastIndex===l.index&&g.lastIndex++;return b===n.length?!o&&g.test("")||u.push(""):u.push(n.slice(b)),u.length>s?u.slice(0,s):u}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,a){var i=r(this),s=null==t?void 0:t[e];return void 0!==s?s.call(t,i,a):n.call(String(i),t,a)},function(e,i){var r=a(n,e,this,i,n!==t);if(r.done)return r.value;var d=s(e),f=String(this),g=l(d,RegExp),h=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(p?"g":"y"),k=new g(p?"^(?:"+d.source+")":d,v),y=void 0===i?m:i>>>0;if(0===y)return[];if(0===f.length)return null===u(k,f)?[f]:[];for(var _=0,x=0,R=[];x<f.length;){k.lastIndex=p?0:x;var C,D=u(k,p?f.slice(x):f);if(null===D||(C=b(o(k.lastIndex+(p?x:0)),f.length))===_)x=c(f,x,h);else{if(R.push(f.slice(_,x)),R.length===y)return R;for(var E=1;E<=D.length-1;E++)if(R.push(D[E]),R.length===y)return R;x=_=C}}return R.push(f.slice(_)),R}]}),p)},6927:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return r}});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"feedback-comment",class:e.classes,style:e.styles},[e.isReply?e._e():a("div",[a("p",{staticClass:"feedback-comment-title"},[e._v("\n      "+e._s(e.feedbackData.title)+"\n    ")]),e._v(" "),e.feedbackData.feedbackRating.rating.ratingValue>0?a("div",{staticClass:"feedback-rating"},e._l(5,(function(t){return a("i",{key:"feedback_rating_"+t,staticClass:"fa fa-star",class:{full:e.feedbackData.feedbackRating.rating.ratingValue>=t,empty:e.feedbackData.feedbackRating.rating.ratingValue<t}})})),0):e._e(),e._v(" "),a("div",{staticClass:"feedback-attributes-list"},[a("p",[e.isPurchased?a("span",{staticClass:"feedback-verified-tag"},[e._v("\n          "+e._s(e.$translate("Feedback::Feedback.verifiedPurchase"))+"\n        ")]):e._e(),e._v(" "),e._l(e.variationAttributes,(function(t,n){return a("span",{key:"feedback_attributes_"+n,staticClass:"feedback-attributes"},[e._v("\n          "+e._s(t.name)+": "+e._s(t.value)+"\n        ")])}))],2)])]),e._v(" "),a("p",{staticClass:"feedback-comment-text",domProps:{innerHTML:e._s(e.message)}}),e._v(" "),a("p",{staticClass:"feedback-info"},[a("span",{staticClass:"feedback-info-segment"},[a("strong",["user"===e.feedbackData.sourceRelation[0].feedbackRelationType?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"feedback-admin",attrs:{"data-toggle":"tooltip","data-placement":"top","data-original-title":e.$translate("Feedback::Feedback.shopManagerLabel")}},[a("i",{staticClass:"fa fa-check-square"}),e._v("\n          "+e._s(e.feedbackData.sourceRelation[0].sourceRelationLabel)+"\n        ")]):0==e.feedbackData.sourceRelation[0].feedbackRelationSourceId&&e.feedback.authorName.length>0?a("span",[e._v("\n          "+e._s(e.feedbackData.authorName)+"\n        ")]):0==e.feedbackData.sourceRelation[0].feedbackRelationSourceId?a("span",[e._v("\n          "+e._s(e.$translate("Feedback::Feedback.guestName"))+"\n        ")]):a("span",[e._v("\n          "+e._s(e.displayName)+"\n        ")])])]),e._v(" "),e.options.timestampVisibility?a("span",{staticClass:"feedback-info-segment"},[a("i",{staticClass:"fa fa-calendar text-muted"}),e._v("\n      "+e._s(e._f("date")(e.feedbackData.createdAt,e.$translate("Ceres::Template.devDateFormatMoment")||"DD.MM.YYYY"))+"\n    ")]):e._e(),e._v(" "),e.isReply||!e.authenticatedUser.isLoggedIn&&!e.options.allowGuestFeedbacks?e._e():a("span",{staticClass:"feedback-info-segment btn btn-sm btn-default",on:{click:function(t){e.replyFormVisible=!e.replyFormVisible}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.addComment"))+"\n    ")]),e._v(" "),e.feedbackData.replies&&e.feedbackData.replies.length>0&&!e.replyListVisible?a("span",{staticClass:"feedback-info-segment btn btn-sm btn-default",on:{click:function(t){e.replyListVisible=!e.replyListVisible}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.viewComments"))+" ("+e._s(e.feedbackData.replies.length)+")\n    ")]):e.feedbackData.replies&&e.feedbackData.replies.length>0&&e.replyListVisible?a("span",{staticClass:"feedback-info-segment btn btn-sm btn-default",on:{click:function(t){e.replyListVisible=!e.replyListVisible}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.hideComments"))+"\n    ")]):e._e()]),e._v(" "),e.replyFormVisible&&!e.isReply&&(e.authenticatedUser.isLoggedIn||e.options.allowGuestFeedbacks)?a("div",{staticClass:"feedback-add-reply"},[!e.authenticatedUser.isLoggedIn&&e.options.allowGuestFeedbacks?a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.authorName,expression:"authorName"}],staticClass:"form-control",attrs:{id:"author",type:"text",name:"author",placeholder:e.$translate("Feedback::Feedback.authorName"),disabled:e.authenticatedUser.limitReached||!e.authenticatedUser.hasPurchased},domProps:{value:e.authorName},on:{input:function(t){t.target.composing||(e.authorName=t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.honeypot,expression:"honeypot"}],staticClass:"form-control",attrs:{id:"comment-textfield",type:"text",name:"comment-textfield"},domProps:{value:e.honeypot},on:{input:function(t){t.target.composing||(e.honeypot=t.target.value)}}})]):e._e(),e._v(" "),a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.replyMessage,expression:"replyMessage"}],staticClass:"form-control",attrs:{name:"message",rows:"3",placeholder:e.$translate("Feedback::Feedback.commentMessage")},domProps:{value:e.replyMessage},on:{input:function(t){t.target.composing||(e.replyMessage=t.target.value)}}})]),e._v(" "),a("button",{staticClass:"btn btn-primary btn-appearance",attrs:{disabled:!e.replyMessage},on:{click:function(t){return e.createReply()}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.submitComment"))+"\n    ")])]):e._e(),e._v(" "),e.feedbackData.replies&&e.feedbackData.replies.length>0&&e.replyListVisible?a("div",{staticClass:"feedback-replies"},e._l(e.feedbackData.replies,(function(t){return a("feedback-list-entry",{key:t.id,attrs:{feedback:t,"item-attributes":e.itemAttributes,"authenticated-user":e.authenticatedUser,"is-reply":!0,"show-controls":e.showControls,classes:e.classes,styles:e.styles,options:e.options},on:{delete:function(t){return e.$emit("delete",t)}}})})),1):e._e()])};n._withStripped=!0,a(7327),a(9826),a(9600),a(1249),a(4916),a(3123);var i={name:"FeedbackComment",components:{"feedback-list-entry":a(8384).Z},props:{feedback:Object,itemAttributes:Array,authenticatedUser:Object,isReply:Boolean,showControls:Boolean,classes:String,styles:String,options:Object},data:function(){return{authorName:"",replyMessage:"",replyFormVisible:!1,replyListVisible:!1,honeypot:"",feedbackData:{}}},computed:{variationAttributes:function(){if("variation"!==this.feedbackData.targetRelation.feedbackRelationType||this.feedbackData.targetRelation.targetRelationName.length<=0||!this.feedbackData.targetRelation.variationAttributes||!this.itemAttributes)return[];var e=this;return this.feedbackData.targetRelation.variationAttributes.map((function(t){var a=e.feedbackData.targetRelation.feedbackRelationTargetId;if(!Object.prototype.hasOwnProperty.call(e.itemAttributes,a)||!Object.prototype.hasOwnProperty.call(e.itemAttributes[a],t.attributeId)||!Object.prototype.hasOwnProperty.call(e.itemAttributes[a][t.attributeId],t.valueId))return null;var n=e.itemAttributes[a][t.attributeId][t.valueId];return{name:n.attributeName,value:n.attributeValue}})).filter((function(e){return null!==e}))},displayName:function(){var e=this.feedbackData.sourceRelation[0].sourceRelationLabel;return" "!==e?e.split(" ").map((function(e,t){return 0===t?e+" ":e.substr(0,1)+"."})).join(""):$translate("Feedback::Feedback.guestName")},message:function(){return this.feedbackData.feedbackComment?this.feedbackData.feedbackComment.comment.message.split("\n").join("<br />"):""},isPurchased:function(){return this.feedbackData.sourceRelation.find((function(e){return"orderItem"===e.feedbackRelationType}))}},created:function(){this.feedbackData=this.feedback},methods:{createReply:function(){if(this.replyMessage&&!(this.honeypot.length>0)){var e=this;$.ajax({type:"POST",url:"/rest/feedbacks/feedback/create",data:{authorName:this.authorName,message:this.replyMessage,targetId:this.feedbackData.id,type:"reply"},contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",xhrFields:{withCredentials:!0},success:function(t){e.feedbackData.replies||(e.feedbackData.replies=[]),e.feedbackData.replies.unshift(t),e.replyMessage="",e.replyFormVisible=!1,e.replyListVisible=!0}})}}}},s=(0,a(1900).Z)(i,n,[],!1,null,null,null);s.options.__file="resources/js/src/app/components/item/singleitem/FeedbackComment.vue";var r=s.exports}}]);
//# sourceMappingURL=feedback-3.min.js.map