(self.webpackChunkplentymarkets_feedback=self.webpackChunkplentymarkets_feedback||[]).push([[3],{2692:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});a(2222),a(7327),a(1249);var r=!1,n=!1,s={loadFeedbackUser(e,t){var a=e.commit,r=t.data,s=t.itemId,i=t.variationId;if(!n){n=!0;var o="";return void 0!==s&&void 0!==i&&(o="/".concat(s,"/").concat(i)),$.ajax({type:"GET",url:"/rest/feedbacks/user"+o,data:r,success:function(e){a("setFeedbackAuthenticatedUser",e),n=!1},error:function(e,t,a){n=!1,console.error(a)}})}},loadFeedbackCounts(e,t){var a=e.commit;e.state;if(!i)return i=!0,$.ajax({type:"GET",url:"/rest/feedbacks/feedback/helper/counts/"+t,success:function(e){a("setFeedbackCounts",e.counts)},error:function(e,t,a){console.error(a)}})},loadPaginatedFeedbacks(e,t){var a=e.commit,n=e.state,s=t.itemId,i=t.feedbacksPerPage;if(!r){r=!0;var o=$.ajax({type:"GET",url:"/rest/feedbacks/feedback/helper/feedbacklist/"+s+"/"+n.pagination.currentPage,data:{feedbacksPerPage:i},success:function(e){a("setFeedbacks",e.feedbacks),a("setFeedbackItemAttributes",e.itemAttributes),a("setFeedbackPagination",e.pagination),r=!1},error:function(e,t,a){console.error(a),r=!1}});return a("incrementCurrentFeedbackPage"),o}},deleteFeedback(e,t){var a=e.commit,r=(e.state,t.feedbackId),n=t.parentFeedbackId,s=t.feedback;return $.ajax({type:"DELETE",url:"/rest/feedbacks/feedback/delete/"+r,success:function(e){a("deleteFeedback",{feedbackId:r,parentFeedbackId:n,feedback:s})}})}},i=!1,o={state:function(){return{authenticatedUser:{},counts:{},feedbacks:[],itemAttributes:[],pagination:{isLastPage:!0,lastPage:1,currentPage:1}}},mutations:{setFeedbackAuthenticatedUser(e,t){e.authenticatedUser=t},setFeedbackCounts(e,t){e.counts=t},setFeedbacks(e,t){e.feedbacks=e.feedbacks.concat(t)},setFeedbackItemAttributes(e,t){e.itemAttributes=t},setFeedbackPagination(e,t){e.pagination.lastPage=t.lastPage,e.pagination.isLastPage=t.isLastPage},incrementCurrentFeedbackPage(e){e.pagination.currentPage++},addFeedback(e,t){if(e.authenticatedUser.feedbacks.unshift(t),t.isVisible){var a=parseInt(t.feedbackRating.rating.ratingValue);a>0&&a<=5&&(e.counts["ratingsCountOf"+a]++,e.counts.ratingsCountTotal++,f(e))}},deleteFeedback(e,t){var a=t.feedbackId,r=t.parentFeedbackId,n=t.feedback;if(n.isVisible&&null===r){var s=parseInt(n.feedbackRating.rating.ratingValue);s>0&&s<=5&&(e.counts["ratingsCountOf"+s]--,e.counts.ratingsCountTotal--,f(e))}null===r?(e.feedbacks=c(e.feedbacks,a),e.authenticatedUser.feedbacks=c(e.authenticatedUser.feedbacks,a)):(e.feedbacks=u(e.feedbacks,r,a),e.authenticatedUser.feedbacks=u(e.authenticatedUser.feedbacks,r,a))}},actions:s,getters:{}};function c(e,t){return e.filter((function(e){return e.id!==t}))}function u(e,t,a){return e.map((function(e){return t===e.id&&(e.replies=e.replies.filter((function(e){return e.id!==a}))),e}))}function f(e){var t=0;t+=5*e.counts.ratingsCountOf5,t+=4*e.counts.ratingsCountOf4,t+=3*e.counts.ratingsCountOf3,t+=2*e.counts.ratingsCountOf2,t+=1*e.counts.ratingsCountOf1,t/=e.counts.ratingsCountTotal,e.counts.averageValue=t}var d={created(){this.$store.hasModule("feedback")||App.isSSR||this.$store.registerModule("feedback",o,{preserveState:!!this.$store.state.feedback})}}},2092:function(e,t,a){var r=a(9974),n=a(8361),s=a(7908),i=a(7466),o=a(5417),c=[].push,u=function(e){var t=1==e,a=2==e,u=3==e,f=4==e,d=6==e,l=7==e,p=5==e||d;return function(v,b,k,g){for(var h,m,C=s(v),_=n(C),y=r(b,k,3),x=i(_.length),F=0,w=g||o,A=t?w(v,x):a||l?w(v,0):void 0;x>F;F++)if((p||F in _)&&(m=y(h=_[F],F,C),e))if(t)A[F]=m;else if(m)switch(e){case 3:return!0;case 5:return h;case 6:return F;case 2:c.call(A,h)}else switch(e){case 4:return!1;case 7:c.call(A,h)}return d?-1:u||f?f:A}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},1194:function(e,t,a){var r=a(7293),n=a(5112),s=a(7392),i=n("species");e.exports=function(e){return s>=51||!r((function(){var t=[];return(t.constructor={})[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9341:function(e,t,a){"use strict";var r=a(7293);e.exports=function(e,t){var a=[][e];return!!a&&r((function(){a.call(null,t||function(){throw 1},1)}))}},5417:function(e,t,a){var r=a(111),n=a(3157),s=a(5112)("species");e.exports=function(e,t){var a;return n(e)&&("function"!=typeof(a=e.constructor)||a!==Array&&!n(a.prototype)?r(a)&&null===(a=a[s])&&(a=void 0):a=void 0),new(void 0===a?Array:a)(0===t?0:t)}},6135:function(e,t,a){"use strict";var r=a(7593),n=a(3070),s=a(9114);e.exports=function(e,t,a){var i=r(t);i in e?n.f(e,i,s(0,a)):e[i]=a}},3157:function(e,t,a){var r=a(4326);e.exports=Array.isArray||function(e){return"Array"==r(e)}},7908:function(e,t,a){var r=a(4488);e.exports=function(e){return Object(r(e))}},2222:function(e,t,a){"use strict";var r=a(2109),n=a(7293),s=a(3157),i=a(111),o=a(7908),c=a(7466),u=a(6135),f=a(5417),d=a(1194),l=a(5112),p=a(7392),v=l("isConcatSpreadable"),b=9007199254740991,k="Maximum allowed index exceeded",g=p>=51||!n((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),h=d("concat"),m=function(e){if(!i(e))return!1;var t=e[v];return void 0!==t?!!t:s(e)};r({target:"Array",proto:!0,forced:!g||!h},{concat:function(e){var t,a,r,n,s,i=o(this),d=f(i,0),l=0;for(t=-1,r=arguments.length;t<r;t++)if(m(s=-1===t?i:arguments[t])){if(l+(n=c(s.length))>b)throw TypeError(k);for(a=0;a<n;a++,l++)a in s&&u(d,l,s[a])}else{if(l>=b)throw TypeError(k);u(d,l++,s)}return d.length=l,d}})},7327:function(e,t,a){"use strict";var r=a(2109),n=a(2092).filter;r({target:"Array",proto:!0,forced:!a(1194)("filter")},{filter:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},2772:function(e,t,a){"use strict";var r=a(2109),n=a(1318).indexOf,s=a(9341),i=[].indexOf,o=!!i&&1/[1].indexOf(1,-0)<0,c=s("indexOf");r({target:"Array",proto:!0,forced:o||!c},{indexOf:function(e){return o?i.apply(this,arguments)||0:n(this,e,arguments.length>1?arguments[1]:void 0)}})},1249:function(e,t,a){"use strict";var r=a(2109),n=a(2092).map;r({target:"Array",proto:!0,forced:!a(1194)("map")},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},8234:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.showEmptyRatings||e.counts.averageValue>0?a("div",{staticClass:"feedback-stars-average",class:e.size},[a("div",{staticClass:"feedback-stars-background clearfix"},e._l(5,(function(e){return a("div",{key:"star_background_"+e,staticClass:"feedback-star"},[a("i",{staticClass:"fa fa-star"})])})),0),e._v(" "),a("div",{staticClass:"feedback-stars-overlay-wrap",style:{width:e.fill}},[a("div",{staticClass:"feedback-stars-overlay clearfix"},e._l(5,(function(e){return a("div",{key:"star_overlay_"+e,staticClass:"feedback-star"},[a("i",{staticClass:"fa fa-star"})])})),0)])]):e._e(),e._v(" "),e.showRatingsAmount&&(e.showEmptyRatings||e.counts.averageValue>0)?a("span",{class:e.size},[a("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.scrollTo(t)}}},[e._v("("+e._s(e.counts.ratingsCountTotal)+")")])]):e._e()])};r._withStripped=!0;a(2772);var n={mixins:[a(2692).Z],inject:{itemId:{default:null}},props:{showEmptyRatings:Boolean,sizeOfStars:{type:String,default:"small"},showRatingsAmount:Boolean},computed:{fill(){var e=100*this.counts.averageValue/5;return e+="%"},size(){return-1!==this.sizeOfStars.indexOf("-stars")?this.sizeOfStars:this.sizeOfStars+"-stars"},counts(){return this.$store.state.feedback.counts}},mounted(){App.isShopBuilder||this.getAverage()},methods:{getAverage(){this.$store.dispatch("loadFeedbackCounts",this.itemId)},scrollTo(){var e=document.querySelector("[data-feedback]"),t=document.querySelector("#vue-app").offsetTop;if(e){for(;(!e.clientHeight||!e.classList.contains("widget"))&&e.parentElement;)e=e.parentElement;if(e){var a=e.getBoundingClientRect().top+window.scrollY-t;window.scrollTo({top:a,behavior:"smooth"})}}}}},s=(0,a(1900).Z)(n,r,[],!1,null,null,null);s.options.__file="resources/js/src/app/components/item/FeedbackAverage.vue";var i=s.exports},1900:function(e,t,a){"use strict";function r(e,t,a,r,n,s,i,o){var c,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=a,u._compiled=!0),r&&(u.functional=!0),s&&(u._scopeId="data-v-"+s),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},u._ssrRegister=c):n&&(c=o?function(){n.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:n),c)if(u.functional){u._injectStyles=c;var f=u.render;u.render=function(e,t){return c.call(t),f(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}a.d(t,{Z:function(){return r}})}}]);
//# sourceMappingURL=feedback-3.min.js.map