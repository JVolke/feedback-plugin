(self.webpackChunkplentymarkets_feedback=self.webpackChunkplentymarkets_feedback||[]).push([[3],{2692:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});n(2222),n(7327),n(1249);var a=!1,r=!1,s={loadFeedbackUser:function(e,t){var n=e.commit,a=t.data,s=t.itemId,i=t.variationId;if(!r){r=!0;var o="";return void 0!==s&&void 0!==i&&(o="/".concat(s,"/").concat(i)),$.ajax({type:"GET",url:"/rest/feedbacks/user"+o,data:a,success:function(e){n("setFeedbackAuthenticatedUser",e),r=!1},error:function(e,t,n){r=!1,console.error(n)}})}},loadFeedbackCounts:function(e,t){var n=e.commit;e.state;if(!i)return i=!0,$.ajax({type:"GET",url:"/rest/feedbacks/feedback/helper/counts/"+t,success:function(e){n("setFeedbackCounts",e.counts)},error:function(e,t,n){console.error(n)}})},loadPaginatedFeedbacks:function(e,t){var n=e.commit,r=e.state,s=t.itemId,i=t.feedbacksPerPage;if(!a){a=!0;var o=$.ajax({type:"GET",url:"/rest/feedbacks/feedback/helper/feedbacklist/"+s+"/"+r.pagination.currentPage,data:{feedbacksPerPage:i},success:function(e){n("setFeedbacks",e.feedbacks),n("setFeedbackItemAttributes",e.itemAttributes),n("setFeedbackPagination",e.pagination),a=!1},error:function(e,t,n){console.error(n),a=!1}});return n("incrementCurrentFeedbackPage"),o}},deleteFeedback:function(e,t){var n=e.commit,a=(e.state,t.feedbackId),r=t.parentFeedbackId,s=t.feedback;return $.ajax({type:"DELETE",url:"/rest/feedbacks/feedback/delete/"+a,success:function(e){n("deleteFeedback",{feedbackId:a,parentFeedbackId:r,feedback:s})}})}},i=!1,o={state:function(){return{authenticatedUser:{},counts:{},feedbacks:[],itemAttributes:[],pagination:{isLastPage:!0,lastPage:1,currentPage:1}}},mutations:{setFeedbackAuthenticatedUser:function(e,t){e.authenticatedUser=t},setFeedbackCounts:function(e,t){e.counts=t},setFeedbacks:function(e,t){e.feedbacks=e.feedbacks.concat(t)},setFeedbackItemAttributes:function(e,t){e.itemAttributes=t},setFeedbackPagination:function(e,t){e.pagination.lastPage=t.lastPage,e.pagination.isLastPage=t.isLastPage},incrementCurrentFeedbackPage:function(e){e.pagination.currentPage++},addFeedback:function(e,t){if(e.authenticatedUser.feedbacks.unshift(t),t.isVisible){var n=parseInt(t.feedbackRating.rating.ratingValue);n>0&&n<=5&&(e.counts["ratingsCountOf"+n]++,e.counts.ratingsCountTotal++,f(e))}},deleteFeedback:function(e,t){var n=t.feedbackId,a=t.parentFeedbackId,r=t.feedback;if(r.isVisible&&null===a){var s=parseInt(r.feedbackRating.rating.ratingValue);s>0&&s<=5&&(e.counts["ratingsCountOf"+s]--,e.counts.ratingsCountTotal--,f(e))}null===a?(e.feedbacks=c(e.feedbacks,n),e.authenticatedUser.feedbacks=c(e.authenticatedUser.feedbacks,n)):(e.feedbacks=u(e.feedbacks,a,n),e.authenticatedUser.feedbacks=u(e.authenticatedUser.feedbacks,a,n))}},actions:s,getters:{}};function c(e,t){return e.filter((function(e){return e.id!==t}))}function u(e,t,n){return e.map((function(e){return t===e.id&&(e.replies=e.replies.filter((function(e){return e.id!==n}))),e}))}function f(e){var t=0;t+=5*e.counts.ratingsCountOf5,t+=4*e.counts.ratingsCountOf4,t+=3*e.counts.ratingsCountOf3,t+=2*e.counts.ratingsCountOf2,t+=1*e.counts.ratingsCountOf1,t/=e.counts.ratingsCountTotal,e.counts.averageValue=t}var d={created:function(){this.$store.hasModule("feedback")||App.isSSR||this.$store.registerModule("feedback",o,{preserveState:!!this.$store.state.feedback})}}},2092:function(e,t,n){var a=n(9974),r=n(8361),s=n(7908),i=n(7466),o=n(5417),c=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,f=4==e,d=6==e,l=7==e,p=5==e||d;return function(v,b,k,g){for(var h,m,C=s(v),_=r(C),y=a(b,k,3),x=i(_.length),F=0,w=g||o,A=t?w(v,x):n||l?w(v,0):void 0;x>F;F++)if((p||F in _)&&(m=y(h=_[F],F,C),e))if(t)A[F]=m;else if(m)switch(e){case 3:return!0;case 5:return h;case 6:return F;case 2:c.call(A,h)}else switch(e){case 4:return!1;case 7:c.call(A,h)}return d?-1:u||f?f:A}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},1194:function(e,t,n){var a=n(7293),r=n(5112),s=n(7392),i=r("species");e.exports=function(e){return s>=51||!a((function(){var t=[];return(t.constructor={})[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9341:function(e,t,n){"use strict";var a=n(7293);e.exports=function(e,t){var n=[][e];return!!n&&a((function(){n.call(null,t||function(){throw 1},1)}))}},5417:function(e,t,n){var a=n(111),r=n(3157),s=n(5112)("species");e.exports=function(e,t){var n;return r(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!r(n.prototype)?a(n)&&null===(n=n[s])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},6135:function(e,t,n){"use strict";var a=n(7593),r=n(3070),s=n(9114);e.exports=function(e,t,n){var i=a(t);i in e?r.f(e,i,s(0,n)):e[i]=n}},3157:function(e,t,n){var a=n(4326);e.exports=Array.isArray||function(e){return"Array"==a(e)}},7908:function(e,t,n){var a=n(4488);e.exports=function(e){return Object(a(e))}},2222:function(e,t,n){"use strict";var a=n(2109),r=n(7293),s=n(3157),i=n(111),o=n(7908),c=n(7466),u=n(6135),f=n(5417),d=n(1194),l=n(5112),p=n(7392),v=l("isConcatSpreadable"),b=9007199254740991,k="Maximum allowed index exceeded",g=p>=51||!r((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),h=d("concat"),m=function(e){if(!i(e))return!1;var t=e[v];return void 0!==t?!!t:s(e)};a({target:"Array",proto:!0,forced:!g||!h},{concat:function(e){var t,n,a,r,s,i=o(this),d=f(i,0),l=0;for(t=-1,a=arguments.length;t<a;t++)if(m(s=-1===t?i:arguments[t])){if(l+(r=c(s.length))>b)throw TypeError(k);for(n=0;n<r;n++,l++)n in s&&u(d,l,s[n])}else{if(l>=b)throw TypeError(k);u(d,l++,s)}return d.length=l,d}})},7327:function(e,t,n){"use strict";var a=n(2109),r=n(2092).filter;a({target:"Array",proto:!0,forced:!n(1194)("filter")},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},2772:function(e,t,n){"use strict";var a=n(2109),r=n(1318).indexOf,s=n(9341),i=[].indexOf,o=!!i&&1/[1].indexOf(1,-0)<0,c=s("indexOf");a({target:"Array",proto:!0,forced:o||!c},{indexOf:function(e){return o?i.apply(this,arguments)||0:r(this,e,arguments.length>1?arguments[1]:void 0)}})},1249:function(e,t,n){"use strict";var a=n(2109),r=n(2092).map;a({target:"Array",proto:!0,forced:!n(1194)("map")},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},8234:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.showEmptyRatings||e.counts.averageValue>0?n("div",{staticClass:"feedback-stars-average",class:e.size},[n("div",{staticClass:"feedback-stars-background clearfix"},e._l(5,(function(e){return n("div",{key:"star_background_"+e,staticClass:"feedback-star"},[n("i",{staticClass:"fa fa-star"})])})),0),e._v(" "),n("div",{staticClass:"feedback-stars-overlay-wrap",style:{width:e.fill}},[n("div",{staticClass:"feedback-stars-overlay clearfix"},e._l(5,(function(e){return n("div",{key:"star_overlay_"+e,staticClass:"feedback-star"},[n("i",{staticClass:"fa fa-star"})])})),0)])]):e._e(),e._v(" "),e.showRatingsAmount&&(e.showEmptyRatings||e.counts.averageValue>0)?n("span",{class:e.size},[n("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.scrollTo(t)}}},[e._v("("+e._s(e.counts.ratingsCountTotal)+")")])]):e._e()])};a._withStripped=!0;n(2772);var r={mixins:[n(2692).Z],inject:{itemId:{default:null}},props:{showEmptyRatings:Boolean,sizeOfStars:{type:String,default:"small"},showRatingsAmount:Boolean},computed:{fill:function(){var e=100*this.counts.averageValue/5;return e+="%"},size:function(){return-1!==this.sizeOfStars.indexOf("-stars")?this.sizeOfStars:this.sizeOfStars+"-stars"},counts:function(){return this.$store.state.feedback.counts}},mounted:function(){App.isShopBuilder||this.getAverage()},methods:{getAverage:function(){this.$store.dispatch("loadFeedbackCounts",this.itemId)},scrollTo:function(){var e=document.querySelector("[data-feedback]"),t=document.querySelector("#vue-app").offsetTop;if(e){for(;(!e.clientHeight||!e.classList.contains("widget"))&&e.parentElement;)e=e.parentElement;if(e){var n=e.getBoundingClientRect().top+window.scrollY-t;window.scrollTo({top:n,behavior:"smooth"})}}}}},s=(0,n(1900).Z)(r,a,[],!1,null,null,null);s.options.__file="resources/js/src/app/components/item/FeedbackAverage.vue";var i=s.exports},1900:function(e,t,n){"use strict";function a(e,t,n,a,r,s,i,o){var c,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),a&&(u.functional=!0),s&&(u._scopeId="data-v-"+s),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},u._ssrRegister=c):r&&(c=o?function(){r.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:r),c)if(u.functional){u._injectStyles=c;var f=u.render;u.render=function(e,t){return c.call(t),f(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,{Z:function(){return a}})}}]);
//# sourceMappingURL=feedback-3.min.js.map