(self.webpackChunkplentymarkets_feedback=self.webpackChunkplentymarkets_feedback||[]).push([[3],{2692:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});r(2222),r(7327),r(1249);var a=!1,n=!1,s={loadFeedbackUser(e,t){var r=e.commit,a=t.itemId,s=t.variationId;if(!n){n=!0;var i="";return void 0!==a&&void 0!==s&&(i="/".concat(a,"/").concat(s)),$.ajax({type:"GET",url:"/rest/feedbacks/user"+i,success:function(e){r("setFeedbackAuthenticatedUser",e),n=!1},error:function(e,t,r){n=!1,console.error(r)}})}},loadFeedbackCounts(e,t){var r=e.commit;e.state;if(!i)return i=!0,$.ajax({type:"GET",url:"/rest/feedbacks/feedback/helper/counts/"+t,success:function(e){r("setFeedbackCounts",e.counts)},error:function(e,t,r){console.error(r)}})},loadPaginatedFeedbacks(e,t){var r=e.commit,n=e.state,s=t.itemId,i=t.feedbacksPerPage;if(!a){a=!0;var o=$.ajax({type:"GET",url:"/rest/feedbacks/feedback/helper/feedbacklist/"+s+"/"+n.pagination.currentPage,data:{feedbacksPerPage:i},success:function(e){r("setFeedbacks",e.feedbacks),r("setFeedbackItemAttributes",e.itemAttributes),r("setFeedbackPagination",e.pagination),a=!1},error:function(e,t,r){console.error(r),a=!1}});return r("incrementCurrentFeedbackPage"),o}},deleteFeedback(e,t){var r=e.commit,a=(e.state,t.feedbackId),n=t.parentFeedbackId,s=t.feedback;return $.ajax({type:"DELETE",url:"/rest/feedbacks/feedback/delete/"+a,success:function(e){r("deleteFeedback",{feedbackId:a,parentFeedbackId:n,feedback:s})}})}},i=!1,o={state:function(){return{authenticatedUser:{},counts:{},feedbacks:[],itemAttributes:[],pagination:{isLastPage:!0,lastPage:1,currentPage:1}}},mutations:{setFeedbackAuthenticatedUser(e,t){e.authenticatedUser=t},setFeedbackCounts(e,t){e.counts=t},setFeedbacks(e,t){e.feedbacks=e.feedbacks.concat(t)},setFeedbackItemAttributes(e,t){e.itemAttributes=t},setFeedbackPagination(e,t){e.pagination.lastPage=t.lastPage,e.pagination.isLastPage=t.isLastPage},incrementCurrentFeedbackPage(e){e.pagination.currentPage++},addFeedback(e,t){if(e.authenticatedUser.feedbacks.unshift(t),t.isVisible){var r=parseInt(t.feedbackRating.rating.ratingValue);r>0&&r<=5&&(e.counts["ratingsCountOf"+r]++,e.counts.ratingsCountTotal++,f(e))}},deleteFeedback(e,t){var r=t.feedbackId,a=t.parentFeedbackId,n=t.feedback;if(n.isVisible&&null===a){var s=parseInt(n.feedbackRating.rating.ratingValue);s>0&&s<=5&&(e.counts["ratingsCountOf"+s]--,e.counts.ratingsCountTotal--,f(e))}null===a?(e.feedbacks=c(e.feedbacks,r),e.authenticatedUser.feedbacks=c(e.authenticatedUser.feedbacks,r)):(e.feedbacks=u(e.feedbacks,a,r),e.authenticatedUser.feedbacks=u(e.authenticatedUser.feedbacks,a,r))}},actions:s,getters:{}};function c(e,t){return e.filter((function(e){return e.id!==t}))}function u(e,t,r){return e.map((function(e){return t===e.id&&(e.replies=e.replies.filter((function(e){return e.id!==r}))),e}))}function f(e){var t=0;t+=5*e.counts.ratingsCountOf5,t+=4*e.counts.ratingsCountOf4,t+=3*e.counts.ratingsCountOf3,t+=2*e.counts.ratingsCountOf2,t+=1*e.counts.ratingsCountOf1,t/=e.counts.ratingsCountTotal,e.counts.averageValue=t}var d={created(){this.$store.hasModule("feedback")||App.isSSR||this.$store.registerModule("feedback",o,{preserveState:!!this.$store.state.feedback})}}},2092:function(e,t,r){var a=r(9974),n=r(8361),s=r(7908),i=r(7466),o=r(5417),c=[].push,u=function(e){var t=1==e,r=2==e,u=3==e,f=4==e,d=6==e,l=7==e,p=5==e||d;return function(v,b,k,g){for(var h,m,C=s(v),_=n(C),y=a(b,k,3),x=i(_.length),F=0,w=g||o,A=t?w(v,x):r||l?w(v,0):void 0;x>F;F++)if((p||F in _)&&(m=y(h=_[F],F,C),e))if(t)A[F]=m;else if(m)switch(e){case 3:return!0;case 5:return h;case 6:return F;case 2:c.call(A,h)}else switch(e){case 4:return!1;case 7:c.call(A,h)}return d?-1:u||f?f:A}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},1194:function(e,t,r){var a=r(7293),n=r(5112),s=r(7392),i=n("species");e.exports=function(e){return s>=51||!a((function(){var t=[];return(t.constructor={})[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9341:function(e,t,r){"use strict";var a=r(7293);e.exports=function(e,t){var r=[][e];return!!r&&a((function(){r.call(null,t||function(){throw 1},1)}))}},5417:function(e,t,r){var a=r(111),n=r(3157),s=r(5112)("species");e.exports=function(e,t){var r;return n(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!n(r.prototype)?a(r)&&null===(r=r[s])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},6135:function(e,t,r){"use strict";var a=r(7593),n=r(3070),s=r(9114);e.exports=function(e,t,r){var i=a(t);i in e?n.f(e,i,s(0,r)):e[i]=r}},3157:function(e,t,r){var a=r(4326);e.exports=Array.isArray||function(e){return"Array"==a(e)}},7908:function(e,t,r){var a=r(4488);e.exports=function(e){return Object(a(e))}},2222:function(e,t,r){"use strict";var a=r(2109),n=r(7293),s=r(3157),i=r(111),o=r(7908),c=r(7466),u=r(6135),f=r(5417),d=r(1194),l=r(5112),p=r(7392),v=l("isConcatSpreadable"),b=9007199254740991,k="Maximum allowed index exceeded",g=p>=51||!n((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),h=d("concat"),m=function(e){if(!i(e))return!1;var t=e[v];return void 0!==t?!!t:s(e)};a({target:"Array",proto:!0,forced:!g||!h},{concat:function(e){var t,r,a,n,s,i=o(this),d=f(i,0),l=0;for(t=-1,a=arguments.length;t<a;t++)if(m(s=-1===t?i:arguments[t])){if(l+(n=c(s.length))>b)throw TypeError(k);for(r=0;r<n;r++,l++)r in s&&u(d,l,s[r])}else{if(l>=b)throw TypeError(k);u(d,l++,s)}return d.length=l,d}})},7327:function(e,t,r){"use strict";var a=r(2109),n=r(2092).filter;a({target:"Array",proto:!0,forced:!r(1194)("filter")},{filter:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},2772:function(e,t,r){"use strict";var a=r(2109),n=r(1318).indexOf,s=r(9341),i=[].indexOf,o=!!i&&1/[1].indexOf(1,-0)<0,c=s("indexOf");a({target:"Array",proto:!0,forced:o||!c},{indexOf:function(e){return o?i.apply(this,arguments)||0:n(this,e,arguments.length>1?arguments[1]:void 0)}})},1249:function(e,t,r){"use strict";var a=r(2109),n=r(2092).map;a({target:"Array",proto:!0,forced:!r(1194)("map")},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},8234:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.showEmptyRatings||e.counts.averageValue>0?r("div",{staticClass:"feedback-stars-average",class:e.size},[r("div",{staticClass:"feedback-stars-background clearfix"},e._l(5,(function(e){return r("div",{key:"star_background_"+e,staticClass:"feedback-star"},[r("i",{staticClass:"fa fa-star"})])})),0),e._v(" "),r("div",{staticClass:"feedback-stars-overlay-wrap",style:{width:e.fill}},[r("div",{staticClass:"feedback-stars-overlay clearfix"},e._l(5,(function(e){return r("div",{key:"star_overlay_"+e,staticClass:"feedback-star"},[r("i",{staticClass:"fa fa-star"})])})),0)])]):e._e(),e._v(" "),e.showRatingsAmount&&(e.showEmptyRatings||e.counts.averageValue>0)?r("span",{class:e.size},[r("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.scrollTo(t)}}},[e._v("("+e._s(e.counts.ratingsCountTotal)+")")])]):e._e()])};a._withStripped=!0;r(2772);var n={mixins:[r(2692).Z],inject:{itemId:{default:null}},props:{showEmptyRatings:Boolean,sizeOfStars:{type:String,default:"small"},showRatingsAmount:Boolean},computed:{fill(){var e=100*this.counts.averageValue/5;return e+="%"},size(){return-1!==this.sizeOfStars.indexOf("-stars")?this.sizeOfStars:this.sizeOfStars+"-stars"},counts(){return this.$store.state.feedback.counts}},mounted(){App.isShopBuilder||this.getAverage()},methods:{getAverage(){this.$store.dispatch("loadFeedbackCounts",this.itemId)},scrollTo(){var e=document.querySelector("[data-feedback]"),t=document.querySelector("#vue-app").offsetTop;if(e){for(;(!e.clientHeight||!e.classList.contains("widget"))&&e.parentElement;)e=e.parentElement;if(e){var r=e.getBoundingClientRect().top+window.scrollY-t;window.scrollTo({top:r,behavior:"smooth"})}}}}},s=(0,r(1900).Z)(n,a,[],!1,null,null,null);s.options.__file="resources/js/src/app/components/item/FeedbackAverage.vue";var i=s.exports},1900:function(e,t,r){"use strict";function a(e,t,r,a,n,s,i,o){var c,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=r,u._compiled=!0),a&&(u.functional=!0),s&&(u._scopeId="data-v-"+s),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},u._ssrRegister=c):n&&(c=o?function(){n.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:n),c)if(u.functional){u._injectStyles=c;var f=u.render;u.render=function(e,t){return c.call(t),f(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}r.d(t,{Z:function(){return a}})}}]);
//# sourceMappingURL=feedback-3.min.js.map